"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1484],{1484:(Z,v,t)=>{t.r(v),t.d(v,{ViajeConductorPageModule:()=>y});var m=t(6814),p=t(95),e=t(3614),d=t(9351),j=t(5861),a=t(9468),g=t(118),V=t(4704);const h=[{path:"",component:(()=>{var o;class s{constructor(n,i,f,T,C){this.location=n,this.router=i,this.activatedRoute=f,this.alertController=T,this.db=C,this.viewType="",this.activatedRoute.queryParams.subscribe(J=>{var u,r,c;null!==(u=this.router.getCurrentNavigation())&&void 0!==u&&u.extras.state&&(this.ruta=null===(r=this.router.getCurrentNavigation())||void 0===r||null===(r=r.extras.state)||void 0===r?void 0:r.ruta,this.viewType=null===(c=this.router.getCurrentNavigation())||void 0===c||null===(c=c.extras)||void 0===c||null===(c=c.state)||void 0===c?void 0:c.viewType)})}ngOnInit(){this.db.dbState().subscribe(n=>{n&&this.db.fetchViajes().subscribe(i=>{this.viajes=i})}),this.countdown=setTimeout(()=>this.finViaje(),5e3)}cancelarViaje(){console.log("!:cancelarViaje()"),clearInterval(this.countdown),this.location.back()}finViaje(){var n=this;return(0,j.Z)(function*(){n.ruta&&n.db.actualizarViajesPorTermino(n.ruta.id_ruta);const i=yield n.alertController.create({header:"Ha llegado a su destino",buttons:["Cerrar"]});i.addEventListener("didDismiss",()=>{n.location.back()}),yield i.present()})()}}return(o=s).\u0275fac=function(n){return new(n||o)(a.Y36(m.Ye),a.Y36(d.F0),a.Y36(d.gz),a.Y36(e.Br),a.Y36(g.J))},o.\u0275cmp=a.Xpm({type:o,selectors:[["app-viaje-conductor"]],decls:10,vars:3,consts:[[3,"translucent"],["color","#1e1e1e"],["lines","none",1,"item-background-color","ion-text-center"],[3,"fullscreen"],["viewType","view"],["slot","fixed","vertical","bottom","horizontal","end"],["size","large","color","danger",3,"click"],["name","close-sharp"]],template:function(n,i){1&n&&(a.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-item",2)(3,"ion-label"),a._uU(4),a.qZA()()()(),a.TgZ(5,"ion-content",3),a._UZ(6,"app-map",4),a.TgZ(7,"ion-fab",5)(8,"ion-fab-button",6),a.NdJ("click",function(){return i.cancelarViaje()}),a._UZ(9,"ion-icon",7),a.qZA()()()),2&n&&(a.Q6J("translucent",!0),a.xp6(4),a.Oqu(i.ruta.nombre),a.xp6(1),a.Q6J("fullscreen",!0))},dependencies:[e.W2,e.IJ,e.W4,e.Gu,e.gu,e.Ie,e.Q$,e.sr,V.G]}),s})()}];let b=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[d.Bz.forChild(h),d.Bz]}),s})();var P=t(9464);let y=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[m.ez,p.u5,e.Pc,P.K,b]}),s})()}}]);