"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1484],{1484:(Z,v,t)=>{t.r(v),t.d(v,{ViajeConductorPageModule:()=>y});var f=t(6814),p=t(95),i=t(3614),d=t(9351),j=t(5861),a=t(9468),g=t(118),V=t(4704);const h=[{path:"",component:(()=>{var o;class c{constructor(n,s,m,T,C){this.location=n,this.router=s,this.activatedRoute=m,this.alertController=T,this.db=C,this.viewType="",this.activatedRoute.queryParams.subscribe(J=>{var u,r,e;null!==(u=this.router.getCurrentNavigation())&&void 0!==u&&u.extras.state&&(this.ruta=null===(r=this.router.getCurrentNavigation())||void 0===r||null===(r=r.extras.state)||void 0===r?void 0:r.ruta,this.viewType=null===(e=this.router.getCurrentNavigation())||void 0===e||null===(e=e.extras)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.viewType)})}ngOnInit(){this.db.dbState().subscribe(n=>{n&&this.db.fetchViajes().subscribe(s=>{this.viajes=s})}),this.countdown=setTimeout(()=>this.finViaje(),5e3)}cancelarViaje(){console.log("!:cancelarViaje()"),clearInterval(this.countdown),this.location.back()}finViaje(){var n=this;return(0,j.Z)(function*(){n.ruta&&n.db.actualizarViajesPorTermino(n.ruta.id_ruta);const s=yield n.alertController.create({header:"Ha llegado a su destino",buttons:["Cerrar"]});s.addEventListener("didDismiss",()=>{n.location.back()}),yield s.present()})()}}return(o=c).\u0275fac=function(n){return new(n||o)(a.Y36(f.Ye),a.Y36(d.F0),a.Y36(d.gz),a.Y36(i.Br),a.Y36(g.J))},o.\u0275cmp=a.Xpm({type:o,selectors:[["app-viaje-conductor"]],decls:7,vars:2,consts:[[3,"translucent"],["color","#1e1e1e"],[3,"fullscreen"],["viewType","view"],["slot","fixed","vertical","bottom","horizontal","end"],["size","large","color","danger",3,"click"],["name","close-sharp"]],template:function(n,s){1&n&&(a.TgZ(0,"ion-header",0),a._UZ(1,"ion-toolbar",1),a.qZA(),a.TgZ(2,"ion-content",2),a._UZ(3,"app-map",3),a.TgZ(4,"ion-fab",4)(5,"ion-fab-button",5),a.NdJ("click",function(){return s.cancelarViaje()}),a._UZ(6,"ion-icon",6),a.qZA()()()),2&n&&(a.Q6J("translucent",!0),a.xp6(2),a.Q6J("fullscreen",!0))},dependencies:[i.W2,i.IJ,i.W4,i.Gu,i.gu,i.sr,V.G]}),c})()}];let P=(()=>{var o;class c{}return(o=c).\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[d.Bz.forChild(h),d.Bz]}),c})();var b=t(9464);let y=(()=>{var o;class c{}return(o=c).\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[f.ez,p.u5,i.Pc,b.K,P]}),c})()}}]);