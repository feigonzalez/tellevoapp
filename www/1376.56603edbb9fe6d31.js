"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1376],{1376:(P,v,o)=>{o.r(v),o.d(v,{HomePageModule:()=>E});var h=o(6814),a=o(3614),u=o(95),y=o(9351),l=o(5861),e=o(9468),n=o(118),s=o(9360),i=o(8251),f=o(2737),m=o(4825),I=o(4829),H=o(9862);let O=(()=>{var r;class c{constructor(t){this.http=t,this.apiURL="https://jsonplaceholder.typicode.com/"}getUsuarios(){return this.http.get(this.apiURL+"users/").pipe(function U(r=1/0){let c;c=r&&"object"==typeof r?r:{count:r};const{count:g=1/0,delay:t,resetOnSuccess:d=!1}=c;return g<=0?f.y:(0,s.e)((p,b)=>{let M,x=0;const C=()=>{let A=!1;M=p.subscribe((0,i.x)(b,w=>{d&&(x=0),b.next(w)},void 0,w=>{if(x++<g){const S=()=>{M?(M.unsubscribe(),M=null,C()):A=!0};if(null!=t){const J="number"==typeof t?(0,m.H)(t):(0,I.Xf)(t(w,x)),Z=(0,i.x)(b,()=>{Z.unsubscribe(),S()},()=>{b.complete()});J.subscribe(Z)}else S()}else b.error(w)})),A&&(M.unsubscribe(),M=null,C())};C()})}(3))}}return(r=c).\u0275fac=function(t){return new(t||r)(e.LFG(H.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),c})();function T(r,c){if(1&r&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&r){const g=e.oxw();e.xp6(1),e.Oqu(g.errorMessage)}}const D=function(){return["/menure"]},F=[{path:"",component:(()=>{var r;class c{constructor(t,d,p){this.navCtrl=t,this.db=d,this.api=p,this.username="",this.password="",this.showErrorMessage=!1,this.errorMessage="",this.usuarios=[],this.dummyData=[],localStorage.getItem("loggedIn")&&("conductor"==localStorage.getItem("uRole")?this.navCtrl.navigateForward("/inicio-conductor"):"pasajero"==localStorage.getItem("uRole")?this.navCtrl.navigateForward("/inicio-pasajero"):this.db.presentAlert("Illegal state: Bad uRole"))}ngOnInit(){this.db.dbState().subscribe(t=>{t&&this.db.fetchRoles().subscribe(d=>{this.usuarios=d})}),this.api.getUsuarios().subscribe(t=>{this.dummyData=t,this.db.presentAlert(this.dummyData[0].id+": "+this.dummyData[0].name)})}login(){var t=this;return(0,l.Z)(function*(){if("bdreport"==t.username.trim()&&"bdreport"==t.password.trim())return void t.navCtrl.navigateForward("/bdreport");if(t.showErrorMessage=!1,""==t.username.trim())return t.errorMessage="Ingrese su correo",void(t.showErrorMessage=!0);if(""==t.password.trim())return t.errorMessage="Ingrese su contrase\xf1a",void(t.showErrorMessage=!0);let d=t.username.trim().toLowerCase(),p=yield t.db.leerUsuarioPorCorreo(d);if(null===p)return t.errorMessage="Usuario no existe",void(t.showErrorMessage=!0);t.password.trim()==p.password?(localStorage.setItem("loggedIn","true"),localStorage.setItem("uID",p.id_usuario),"1"==p.id_rol?(t.navCtrl.navigateForward("/inicio-conductor"),localStorage.setItem("uRole","conductor")):(t.navCtrl.navigateForward("/inicio-pasajero"),localStorage.setItem("uRole","pasajero"))):(t.errorMessage="Contrase\xf1a incorrecta",t.showErrorMessage=!0)})()}}return(r=c).\u0275fac=function(t){return new(t||r)(e.Y36(a.SH),e.Y36(n.J),e.Y36(O))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-home"]],decls:30,vars:5,consts:[["color","#1e1e1e"],["slot","start"],[2,"color","white"],["padding","",1,"background"],["src","assets/pepe.png"],[2,"top","2 rem"],[2,"text-align","center"],[2,"margin-left","auto","margin-right","auto","font-size","50px","font-weight","bold","color","white"],[2,"top","2rem"],["type","text","placeholder","Usuario",3,"ngModel","ngModelChange"],["border-radius","10"],["type","password","type","password","placeholder","Contrase\xf1a",3,"ngModel","ngModelChange"],["class","error-message",4,"ngIf"],[3,"click"],["color","grey",3,"routerLink"],[2,"bottom","-1rem"],[2,"margin-left","auto","margin-right","auto","font-size","10px","color","white"],[1,"error-message"]],template:function(t,d){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0),e._UZ(2,"ion-buttons",1),e.TgZ(3,"ion-title",2),e._uU(4,"Inicio de sesi\xf3n"),e.qZA()()(),e.TgZ(5,"ion-content",3),e._UZ(6,"ion-img",4),e.TgZ(7,"ion-card-content",5)(8,"div",6)(9,"ion-text",7),e._uU(10,"Te LLevo."),e.qZA()()(),e.TgZ(11,"ion-card-content",8)(12,"ion-item")(13,"ion-input",9),e.NdJ("ngModelChange",function(b){return d.username=b}),e.qZA()(),e._UZ(14,"br"),e.TgZ(15,"ion-item",10)(16,"ion-input",11),e.NdJ("ngModelChange",function(b){return d.password=b}),e.qZA()(),e._UZ(17,"br"),e.YNc(18,T,2,1,"div",12),e._UZ(19,"br"),e.TgZ(20,"div",6)(21,"ion-button",13),e.NdJ("click",function(){return d.login()}),e._uU(22,"Iniciar sesi\xf3n."),e.qZA()(),e.TgZ(23,"div",6)(24,"ion-button",14),e._uU(25,"Registrarse."),e.qZA()()(),e.TgZ(26,"ion-card-content",15)(27,"div",6)(28,"ion-text",16),e._uU(29,"Te LLevo. Marca(no) Registrada 2023-2023"),e.qZA()()()()),2&t&&(e.xp6(13),e.Q6J("ngModel",d.username),e.xp6(3),e.Q6J("ngModel",d.password),e.xp6(2),e.Q6J("ngIf",d.showErrorMessage),e.xp6(6),e.Q6J("routerLink",e.DdM(4,D)))},dependencies:[h.O5,u.JJ,u.On,a.YG,a.Sm,a.FN,a.W2,a.Gu,a.Xz,a.pK,a.Ie,a.yW,a.wd,a.sr,a.j9,a.YI,y.rH],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}div[_ngcontent-%COMP%]{text-align:center}ion-button[_ngcontent-%COMP%]{border-radius:10px;background-color:#1e1e1e;color:#fff;width:80%;height:50px}ion-content.background[_ngcontent-%COMP%]{--background: url(fondo.b64b15d7ead4a074.jpg) 0 0/100% 100% no-repeat}ion-item[_ngcontent-%COMP%]{border-radius:10px}ion-card-content[_ngcontent-%COMP%]{border-radius:4px}ion-header[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#1e1e1e}ion-toolbar[_ngcontent-%COMP%]{color:#1e1e1e;background-color:#1e1e1e}.error-message[_ngcontent-%COMP%]{background-color:#fff;color:red;text-align:center;margin-top:10px;border-radius:4px;font-size:20px;font-weight:700}"]}),c})()}];let R=(()=>{var r;class c{}return(r=c).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[y.Bz.forChild(F),y.Bz]}),c})(),E=(()=>{var r;class c{}return(r=c).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[h.ez,u.u5,a.Pc,R]}),c})()},4825:(P,v,o)=>{o.d(v,{H:()=>l});var h=o(5592),a=o(6321),u=o(671);function l(e=0,n,s=a.P){let i=-1;return null!=n&&((0,u.K)(n)?s=n:i=n),new h.y(f=>{let m=function y(e){return e instanceof Date&&!isNaN(e)}(e)?+e-s.now():e;m<0&&(m=0);let I=0;return s.schedule(function(){f.closed||(f.next(I++),0<=i?this.schedule(void 0,i):f.complete())},m)})}},1954:(P,v,o)=>{o.d(v,{o:()=>l});var h=o(7394);class a extends h.w0{constructor(n,s){super()}schedule(n,s=0){return this}}const u={setInterval(e,n,...s){const{delegate:i}=u;return null!=i&&i.setInterval?i.setInterval(e,n,...s):setInterval(e,n,...s)},clearInterval(e){const{delegate:n}=u;return((null==n?void 0:n.clearInterval)||clearInterval)(e)},delegate:void 0};var y=o(9039);class l extends a{constructor(n,s){super(n,s),this.scheduler=n,this.work=s,this.pending=!1}schedule(n,s=0){var i;if(this.closed)return this;this.state=n;const f=this.id,m=this.scheduler;return null!=f&&(this.id=this.recycleAsyncId(m,f,s)),this.pending=!0,this.delay=s,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(m,this.id,s),this}requestAsyncId(n,s,i=0){return u.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,s,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return s;null!=s&&u.clearInterval(s)}execute(n,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,s);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,s){let f,i=!1;try{this.work(n)}catch(m){i=!0,f=m||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),f}unsubscribe(){if(!this.closed){const{id:n,scheduler:s}=this,{actions:i}=s;this.work=this.state=this.scheduler=null,this.pending=!1,(0,y.P)(i,this),null!=n&&(this.id=this.recycleAsyncId(s,n,null)),this.delay=null,super.unsubscribe()}}}},9931:(P,v,o)=>{o.d(v,{v:()=>u});const h={now:()=>(h.delegate||Date).now(),delegate:void 0};class a{constructor(l,e=a.now){this.schedulerActionCtor=l,this.now=e}schedule(l,e=0,n){return new this.schedulerActionCtor(this,l).schedule(n,e)}}a.now=h.now;class u extends a{constructor(l,e=a.now){super(l,e),this.actions=[],this._active=!1}flush(l){const{actions:e}=this;if(this._active)return void e.push(l);let n;this._active=!0;do{if(n=l.execute(l.state,l.delay))break}while(l=e.shift());if(this._active=!1,n){for(;l=e.shift();)l.unsubscribe();throw n}}}},6321:(P,v,o)=>{o.d(v,{P:()=>y,z:()=>u});var h=o(1954);const u=new(o(9931).v)(h.o),y=u}}]);