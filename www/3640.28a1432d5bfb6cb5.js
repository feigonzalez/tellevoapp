"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3640],{3640:(V,m,e)=>{e.r(m),e.d(m,{VerRutaPasajeroPageModule:()=>A});var h=e(6814),P=e(95),i=e(3614),d=e(9351),p=e(5861),f=e(816);class Z{constructor(){this.id_usuario="",this.nombre="",this.correo="",this.password="",this.numero_cel="",this.imagen="",this.id_rol=""}}var a=e(9468),y=e(118),b=e(4704);const j=[{path:"",component:(()=>{var t;class r{constructor(o,n,v){this.router=o,this.activatedRoute=n,this.db=v,this.viewType="",this.asResv=0,this.asDisp=0,this.activatedRoute.queryParams.subscribe(w=>{var g,u,c,s;null!==(g=this.router.getCurrentNavigation())&&void 0!==g&&g.extras.state?(this.ruta=null===(u=this.router.getCurrentNavigation())||void 0===u||null===(u=u.extras.state)||void 0===u?void 0:u.ruta,this.conductor=null===(c=this.router.getCurrentNavigation())||void 0===c||null===(c=c.extras.state)||void 0===c?void 0:c.conductor,this.viewType=null===(s=this.router.getCurrentNavigation())||void 0===s||null===(s=s.extras)||void 0===s||null===(s=s.state)||void 0===s?void 0:s.viewType):(this.ruta||(this.ruta=new f.N),this.conductor||(this.conductor=new Z))})}ngOnInit(){var o=this;return(0,p.Z)(function*(){o.db.dbState().subscribe(n=>{n&&o.readAsientosReservados()})})()}readAsientosReservados(){var o=this;return(0,p.Z)(function*(){o.asResv=yield o.db.contarViajesPorRutaYEstado(o.ruta.id_ruta,"aceptado");let n=yield o.db.leerVehiculoPorUsuario(o.conductor.id_usuario);o.asDisp=n.n_asientos})()}ngAfterContentInit(){return(0,p.Z)(function*(){})()}solicitarViaje(){console.log("!:solicitarViaje()");let o=localStorage.getItem("uID");o&&this.db.crearViaje(this.ruta.tarifa,this.db.getCurrentDatestring(),"solicitado",this.ruta.id_ruta,parseInt(o)),this.router.navigate(["/viaje-pasajero"],{state:{ruta:this.ruta,viewType:this.viewType}})}abrirChat(o){this.router.navigate(["/mensaje-pasajero"],{state:{id_pareja:o}})}}return(t=r).\u0275fac=function(o){return new(o||t)(a.Y36(d.F0),a.Y36(d.gz),a.Y36(y.J))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-ver-ruta-pasajero"]],decls:59,vars:10,consts:[[3,"translucent"],["color","#1e1e1e"],["slot","start"],["defaultHref","/inicio-conductor","text","Volver"],[3,"fullscreen"],[3,"viewType"],["expand","block","size","large",2,"margin","1rem",3,"click"],["lines","none"],[1,"display-label"],[1,"display-value-text"],["slot","end"],[1,"round-icon",3,"click"],["name","chatbubbles-sharp"],[1,"display-labels"],["lines","none",1,"ion-text-center"],[1,"display-values"]],template:function(o,n){1&o&&(a.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),a._UZ(3,"ion-back-button",3),a.qZA()()(),a.TgZ(4,"ion-content",4),a._UZ(5,"app-map",5),a.qZA(),a.TgZ(6,"ion-footer")(7,"ion-button",6),a.NdJ("click",function(){return n.solicitarViaje()}),a._uU(8,"Solicitar Pasaje"),a.qZA(),a.TgZ(9,"ion-grid")(10,"ion-row")(11,"ion-col")(12,"ion-item",7)(13,"span",8),a._uU(14,"Asientos disponibles"),a.qZA(),a.TgZ(15,"span",9),a._uU(16),a.qZA()()()(),a.TgZ(17,"ion-row")(18,"ion-col")(19,"ion-item",7)(20,"span",8),a._uU(21,"Conductor"),a.qZA(),a.TgZ(22,"span",9),a._uU(23),a.qZA(),a.TgZ(24,"ion-buttons",10)(25,"ion-button",11),a.NdJ("click",function(){return n.abrirChat(n.conductor.id_usuario)}),a._UZ(26,"ion-icon",12),a.qZA()()()()(),a.TgZ(27,"ion-row")(28,"ion-col")(29,"ion-item",7)(30,"span",8),a._uU(31,"Salida"),a.qZA(),a.TgZ(32,"span",9),a._uU(33),a.qZA()()()(),a.TgZ(34,"ion-row")(35,"ion-col")(36,"ion-item",7)(37,"span",8),a._uU(38,"Destino"),a.qZA(),a.TgZ(39,"span",9),a._uU(40),a.qZA()()()(),a.TgZ(41,"ion-row",13)(42,"ion-col")(43,"ion-item",14)(44,"span"),a._uU(45,"Tarifa"),a.qZA()()(),a.TgZ(46,"ion-col")(47,"ion-item",7)(48,"span"),a._uU(49,"Hora de Salida"),a.qZA()()()(),a.TgZ(50,"ion-row",15)(51,"ion-col")(52,"ion-item",7)(53,"span"),a._uU(54),a.qZA()()(),a.TgZ(55,"ion-col")(56,"ion-item",7)(57,"span"),a._uU(58),a.qZA()()()()()()),2&o&&(a.Q6J("translucent",!0),a.xp6(4),a.Q6J("fullscreen",!0),a.xp6(1),a.Q6J("viewType",n.viewType),a.xp6(11),a.AsE("",n.asResv,"/",n.asDisp,""),a.xp6(7),a.Oqu(n.conductor.nombre),a.xp6(10),a.Oqu(n.ruta.origen),a.xp6(7),a.Oqu(n.ruta.destino),a.xp6(14),a.hij("$",n.ruta.tarifa,""),a.xp6(4),a.Oqu(n.ruta.hora_salida))},dependencies:[i.oU,i.YG,i.Sm,i.wI,i.W2,i.fr,i.jY,i.Gu,i.gu,i.Ie,i.Nd,i.sr,i.cs,b.G],styles:["ion-button.round-icon[_ngcontent-%COMP%]{--border-radius:50%;height:40px;width:40px;font-size:1rem}.display-labels[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:1rem;color:gray;padding:.2rem;text-align:center;width:100%}.display-label[_ngcontent-%COMP%]{display:inline-block;font-size:1rem;color:gray;min-width:100px;max-width:100px}.display-value-text[_ngcontent-%COMP%]{display:inline-block;overflow:auto}.display-values[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:2rem;padding:.2rem;text-align:center;width:100%}"]}),r})()}];let T=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[d.Bz.forChild(j),d.Bz]}),r})();var R=e(9464);let A=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[h.ez,P.u5,i.Pc,T,R.K]}),r})()}}]);