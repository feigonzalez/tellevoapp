"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9633],{9633:(M,m,c)=>{c.r(m),c.d(m,{InicioConductorPageModule:()=>P});var g=c(6814),s=c(95),i=c(3614),d=c(9351),h=c(5861),t=c(9468),p=c(1125),f=c(118);function b(n,a){if(1&n&&(t.TgZ(0,"ion-card")(1,"ion-card-header"),t._uU(2),t.qZA(),t.TgZ(3,"ion-card-content"),t._uU(4),t.qZA()()),2&n){const r=t.oxw();t.xp6(2),t.hij(" ",r.weatherData.name," "),t.xp6(2),t.hij(" Temperatura: ",r.weatherData.main.temp,"\xb0K ")}}function C(n,a){if(1&n){const r=t.EpF();t.TgZ(0,"ion-item",24),t.NdJ("click",function(){const u=t.CHM(r).$implicit,l=t.oxw();return t.KtG(l.verRuta(u.id_ruta))}),t.TgZ(1,"ion-label",25)(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.qZA()(),t.TgZ(6,"ion-label",26),t._uU(7),t.qZA()()}if(2&n){const r=a.$implicit;t.xp6(3),t.Oqu(r.origen),t.xp6(2),t.hij("\u2192 ",r.destino,""),t.xp6(2),t.Oqu(r.hora_salida)}}const _=function(){return["/perfil-conductor"]},v=function(){return["/buzon-conductor"]},I=[{path:"",component:(()=>{var n;class a{constructor(e,o,u,l,k){this.router=e,this.fb=o,this.toastController=u,this.weatherService=l,this.db=k,this.rutas={},this.usuario={},this.city="Santiago",this.apiKey="ffe31d51024efac03faf1902e771d2b4",this.apiUrl="https://api.openweathermap.org/data/2.5/weather",this.imagen=null,this.contrasenaActual="",this.nuevaContrasena="",this.confirmarNuevaContrasena="",this.usuario.imagen=null}ngOnInit(){this.db.dbState().subscribe(e=>{e&&(this.db.fetchRutas().subscribe(o=>{this.rutas=o}),this.loadUsuario(),this.loadRutas())})}getWeather(e){this.weatherService.getWeather(e).subscribe(o=>{this.weatherData=o,console.log(this.weatherData)})}loadUsuario(){var e=this;return(0,h.Z)(function*(){let o=localStorage.getItem("uID");o&&(e.usuario=yield e.db.leerUsuarioPorID(o))})()}loadRutas(){var e=this;return(0,h.Z)(function*(){let o=localStorage.getItem("uID");o&&e.db.leerRutasPorUsuario(o)})()}crearRuta(){console.log("!:crearRuta()");let e={state:{ruta:{id_ruta:-1,origen:"",destino:"",tarifa:0,hora_salida:"00:00",id_usuario:localStorage.getItem("uID")},viewType:"new"}};this.router.navigate(["/editar-ruta"],e)}verRuta(e){var o=this;return(0,h.Z)(function*(){console.log("!:verRuta("+e+")");let u={state:{ruta:yield o.db.leerRutaPorId(e),viewType:"view"}};o.router.navigate(["/ver-ruta"],u)})()}salirCuenta(){this.db.presentAlert("Salir de cuenta"),localStorage.removeItem("loggedIn"),localStorage.removeItem("uRole"),localStorage.removeItem("uID"),this.router.navigate(["/"])}}return(n=a).\u0275fac=function(e){return new(e||n)(t.Y36(d.F0),t.Y36(s.qu),t.Y36(i.yF),t.Y36(p.F),t.Y36(f.J))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inicio-conductor"]],decls:36,vars:12,consts:[[3,"translucent"],["color","#1e1e1e"],["slot","start"],[1,"round-icon",3,"click"],["name","power"],["lines","none","detail","false",1,"item-background-color",3,"routerLink"],[1,"round-icon"],[1,"userIcon"],[3,"src"],["slot","end"],[1,"round-icon",3,"routerLink"],["name","chatbubbles-sharp"],["padding","",1,"background",3,"fullscreen"],["position","floating"],[3,"ngModel","ngModelChange"],[2,"text-align","center"],["expand","block","size","large","expand","full",2,"display","inline-block","margin","1rem",3,"click"],[4,"ngIf"],[2,"margin-bottom","94px"],[1,"ion-text-center",2,"color","#1e1e1e"],["lines","full"],[3,"click",4,"ngFor","ngForOf"],[1,"footer",2,"background","#fff"],["expand","block","size","large",2,"display","inline-block","margin","1rem",3,"click"],[3,"click"],[2,"--padding-start","1rem","overflow","scroll","white-space","nowrap"],[1,"ion-text-right",2,"max-width","70px"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),t.NdJ("click",function(){return o.salirCuenta()}),t._UZ(4,"ion-icon",4),t.qZA()(),t.TgZ(5,"ion-item",5)(6,"ion-label"),t._uU(7),t.qZA(),t.TgZ(8,"ion-button",6)(9,"ion-thumbnail",7),t._UZ(10,"img",8),t._uU(11,"> "),t.qZA()()(),t.TgZ(12,"ion-buttons",9)(13,"ion-button",10),t._UZ(14,"ion-icon",11),t.qZA()()()(),t.TgZ(15,"ion-content",12)(16,"ion-item")(17,"ion-label",13),t._uU(18,"Ciudad"),t.qZA(),t.TgZ(19,"ion-input",14),t.NdJ("ngModelChange",function(l){return o.city=l}),t.qZA()(),t.TgZ(20,"div",15)(21,"ion-button",16),t.NdJ("click",function(){return o.getWeather(o.city)}),t._uU(22,"Obtener Clima"),t.qZA()(),t.YNc(23,b,5,2,"ion-card",17),t.TgZ(24,"ion-content",12)(25,"ion-card",18)(26,"ion-card-header")(27,"ion-card-title",19),t._uU(28,"Rutas"),t.qZA()(),t.TgZ(29,"ion-card-content")(30,"ion-list",20),t.YNc(31,C,8,3,"ion-item",21),t.qZA()()()(),t.TgZ(32,"ion-footer",22)(33,"div",15)(34,"ion-button",23),t.NdJ("click",function(){return o.crearRuta()}),t._uU(35,"A\xf1adir Ruta"),t.qZA()()()()),2&e&&(t.Q6J("translucent",!0),t.xp6(5),t.Q6J("routerLink",t.DdM(10,_)),t.xp6(2),t.Oqu(o.usuario.nombre),t.xp6(3),t.s9C("src",o.usuario.imagen,t.LSH),t.xp6(3),t.Q6J("routerLink",t.DdM(11,v)),t.xp6(2),t.Q6J("fullscreen",!0),t.xp6(4),t.Q6J("ngModel",o.city),t.xp6(4),t.Q6J("ngIf",o.weatherData),t.xp6(1),t.Q6J("fullscreen",!0),t.xp6(7),t.Q6J("ngForOf",o.rutas))},dependencies:[g.sg,g.O5,s.JJ,s.On,i.YG,i.Sm,i.PM,i.FN,i.Zi,i.Dq,i.W2,i.fr,i.Gu,i.gu,i.pK,i.Ie,i.Q$,i.q_,i.Bs,i.sr,i.j9,i.YI,d.rH],styles:["ion-thumbnail.round[_ngcontent-%COMP%]{border-radius:50%;overflow:clip}ion-button[_ngcontent-%COMP%]   .userIcon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;max-width:-moz-fit-content;max-width:fit-content}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:nth-child(2n){--background:#EEEEEE}ion-content.background[_ngcontent-%COMP%]{--background: url(/assets/fondo.jpg) 0 0/100% 100% no-repeat}ion-toolbar[_ngcontent-%COMP%]{color:#1e1e1e;background-color:#1e1e1e}ion-item[_ngcontent-%COMP%]{color:#1e1e1e;background-color:#1e1e1e}.item-background-color[_ngcontent-%COMP%]{--ion-item-background:#1e1e1e;color:#fff;text-align:right}ion-button[_ngcontent-%COMP%]{border-radius:20px;background-color:#1e1e1e;color:#fff;width:80%;height:50px}ion-content.background[_ngcontent-%COMP%]{--background: url(/assets/fondo.jpg) 0 0/100% 100% no-repeat}ion-footer.footer[_ngcontent-%COMP%]{position:absolute;bottom:0}"]}),a})()}];let Z=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.Bz.forChild(I),d.Bz]}),a})(),P=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,s.u5,i.Pc,Z]}),a})()}}]);